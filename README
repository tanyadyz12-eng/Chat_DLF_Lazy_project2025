# Lazor Puzzle Solver

Automatic solver for the Lazor puzzle game. This program reads board configuration files (.bff) and finds solutions by testing different block placements until all target points are hit by lasers.

## Team Members
- Zhihan Liu
- Yizhe Ding
- Qian Fu

## Requirements

- Python 3.7+
- No external libraries required (uses only standard library)

## Installation
```bash
git clone [your-repo-url]
cd lazor-solver
```

## Quick Start

### 1. Create test board files:
```bash
python test_boards.py
```

### 2. Solve a board:
```bash
python lazor_solver.py mad_1.bff
```

### 3. Run unit tests:
```bash
python test_lazor_solver.py
```

### 4. Test all boards:
```bash
python test_boards.py test
```

## File Format (.bff)

Board files use the following format:
```
GRID START
o o o o    # o = blocks allowed, x = no blocks allowed
o o o o    # A/B/C = fixed blocks (reflect/opaque/refract)
GRID STOP

A 2        # 2 reflect blocks available
B 1        # 1 opaque block available
C 1        # 1 refract block available

L 2 7 1 -1 # Laser: position (2,7), direction (1,-1)

P 3 0      # Target point at (3,0)
P 4 3      # Target point at (4,3)
```

### Block Types

- **A (Reflect)**: Reflects laser at 90 degrees
- **B (Opaque)**: Absorbs laser completely
- **C (Refract)**: Splits laser into two beams (one continues, one reflects)

### Coordinate System

- Origin (0,0) is at top-left
- Step size is "half blocks" (even = between blocks, odd = at block centers)
- X-axis increases to the right
- Y-axis increases downward

## Project Structure
```
lazor-solver/
├── lazor_solver.py          # Main solver implementation
├── test_boards.py           # Test file creator and batch tester
├── test_lazor_solver.py     # Unit tests
├── README.md               # This file
├── mad_1.bff               # Test board files
├── dark_1.bff
├── mad_4.bff
├── mad_7.bff
├── numbered_6.bff
├── showstopper_4.bff
├── tiny_5.bff
├── yarn_5.bff
└── *_solution.txt          # Generated solution files
```

## Algorithm

1. **Parse Board**: Read .bff file and extract grid, blocks, lasers, and targets
2. **Generate Configurations**: Create all possible combinations of block placements
3. **Simulate Lasers**: For each configuration, trace laser paths
4. **Check Solution**: Verify if all target points are hit
5. **Output Result**: Save solution to file with visualization

### Optimization Techniques

- **Early Termination**: Skip permutations when all blocks are same type
- **Visited State Tracking**: Avoid infinite loops in laser simulation
- **Efficient Data Structures**: Use sets for fast lookup of hit points

## Test Boards

The project includes 8 test boards of varying difficulty:

| Board | Size | Blocks | Lasers | Targets | Difficulty | Expected Time |
|-------|------|--------|--------|---------|------------|---------------|
| mad_1 | 4×4 | 2A, 1C | 1 | 4 | Medium | <5s |
| dark_1 | 3×3 | 3B | 4 | 2 | Medium | <5s |
| mad_4 | 5×4 | 5A | 1 | 3 | Medium | <10s |
| mad_7 | 5×5 | 6A | 2 | 5 | High | <30s |
| numbered_6 | 5×3 | 3A, 3B | 2 | 2 | Medium | <10s |
| showstopper_4 | 3×3 | 3A, 3B + 1 fixed B | 1 | 1 | Medium | <5s |
| tiny_5 | 3×3 | 3A, 1C + 1 fixed B | 1 | 2 | Medium | <5s |
| yarn_5 | 6×5 | 8A + 2 fixed B | 1 | 2 | Very High | <60s |

All boards solve within the required 2-minute time limit.

## Output Format

Solutions are saved to `<board_name>_solution.txt` with:

- Block placement details (grid position and laser coordinates)
- Fixed block locations
- Verification of target points
- Visual grid representation

Example output:
```
PLACED BLOCKS:
  1. Reflect (A) at grid[0][1] (laser coords (3, 1))
  2. Reflect (A) at grid[2][2] (laser coords (5, 5))

VISUAL GRID:
  0: . a . .
  1: . . . .
  2: . . a .
  3: . . . .

  (Uppercase = fixed, lowercase = placed)
```

## Code Quality

- **PEP8 Compliant**: Follows Python style guidelines
- **Docstrings**: All functions and classes documented
- **Type Hints**: Clear parameter and return types
- **Error Handling**: Robust file reading and validation

## Contributing

This is a class project for EN.540.635 Software Carpentry at Johns Hopkins University.

## License

Educational use only - Johns Hopkins University ChemBE Department

## Acknowledgments

- Course Instructors: V. Matos, L. Oluoch, T. Mellor
- Original Lazor game creators